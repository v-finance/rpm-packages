Prerequisites
=============

Packages for building RPMs (rpm-build, rpm-devel, rpmlint and rpmdevtools)
should already be installed on your workstation by ansible.


Building Packages
=================

A list of the available packages can be obtained using:

$ invoke list-packages

When building a package for the first time, it is necessary to install the build
dependencies:

$ invoke install-build-deps <package>

Next, the package can be build:

$ invoke build-package <package>

To build and install all packages, the following command can be used:

$ invoke build-all-packages	# requires sudo

To build all packages without sudo, mock can be used:

$ invoke mock-build-packages


Naming Conventions
==================

- Packages always have a bundle name (e.g. stable) associated with them.
- Package names start with the prefix "vortex-<bundle_name>-" (e.g. vortex-stable-).
  This helps to distinguish them from other packages provided by CentOS and
  vortex packages from other bundles.
- Packages are installed to the "/vortex/<target_triplet>/<bundle_name>" directory.
- See https://wiki.osdev.org/Target_Triplet for more information about the target
  triplet. Currently, the output of "gcc -dumpmachine" is used.


LD_LIBRARY_PATH
===============

Since packages are not installed to default locations, it is necessary to set the
LD_LIBRARY_PATH environment variable to make sure the correct libraries are used.
The dynamic libraries are always located in the
"/vortex/<target_triplet>/<bundle_name>/lib" directory.

Example:

$ export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:/vortex/x86_64-redhat-linux/stable/lib"
$ ...


Dependencies Between Packages
=============================

PACKAGE			DEPENDS ON
vortex-openssl		-
vortex-qt5		-
vortex-python3		vortex-openssl
vortex-sip		vortex-openssl, vortex-python3, vortex-qt5
vortex-pyqt5		vortex-openssl, vortex-python3, vortex-qt5, vortex-sip


Setting the Bundle Name
=======================

If no bundle name is specified, a default name is used (currently stable).

To set the bundle name, the VORTEX_BUNDLE environment variable should be set when
building a package.

For example:

$ VORTEX_BUNDLE=feature-freeze invoke build-package vortex-python3
