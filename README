Prerequisites
=============

Packages for building RPMs (rpm-build, rpm-devel, rpmlint and rpmdevtools)
should already be installed on your workstation by ansible.


Building Packages
=================

A list of the available packages can be obtained using:

$ invoke list-packages

When building a package for the first time, it is necessary to install the build
dependencies:

$ invoke install-build-deps <package>

Next, the package can be build:

$ invoke build-package <package>

To build and install all packages, the following command can be used:

$ invoke build-all-packages


LD_LIBRARY_PATH
===============

Since packages are not installed to default locations, it is necessary to set the
LD_LIBRARY_PATH environment variable to make sure the correct libraries are used.

Example:

$ export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:/vortex/python-3.4.4-vortex/lib:/vortex/Qt-5.15.0/lib"
$ ...


Naming Conventions
==================

- All package names start with the prefix "vortex-". This helps to distinguish
  them from other packages provided by CentOS.
- Packages are installed to the "/vortex" directory.


Dependencies Between Packages
=============================

PACKAGE			DEPENDS ON
vortex-openssl		-
vortex-qt5		-
vortex-python3		vortex-openssl
vortex-sip		vortex-openssl, vortex-python3, vortex-qt5
vortex-pyqt5		vortex-openssl, vortex-python3, vortex-qt5, vortex-sip


Package Specific Options
========================

Some spec files provide additional configuration options. These are explained in
the section at the top of the spec file.

vortex-python3
--------------

The python3 package allows for a suffix to be used:

$ VORTEX_PYTHON_SUFFIX=-feature-freeze invoke build-package vortex-python3

This will add the provided suffix to both the package name and install directory.

vortex-sip and vortex-pyqt5
---------------------------

Packages that depend on python need to build against a specific version of
python. This version can be set using the VORTEX_PYTHON_PACKAGE environment
variable. If this variable is not set, the spec file provides a default value.

Examples:

$ invoke build-package vortex-sip
$ invoke build-package vortex-pyqt5

$ VORTEX_PYTHON_PACKAGE=python-3.4.4-vortex invoke build-package vortex-sip
$ VORTEX_PYTHON_PACKAGE=python-3.4.4-vortex invoke build-package vortex-pyqt5
